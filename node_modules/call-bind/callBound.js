'use strict';

const GetIntrinsic = require('get-intrinsic');
const callBind = require('./callBind');

const hasPrototypeIndex = (name) => name.indexOf('.prototype.') > -1;

const callBoundIntrinsic = (name, allowMissing = false) => {
  const intrinsic = GetIntrinsic(name, allowMissing);

  if (typeof intrinsic === 'function' && hasPrototypeIndex(name)) {
    return callBind(intrinsic);
  }

  return intrinsic;
};

module.exports = callBoundIntrinsic;
